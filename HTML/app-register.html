<!doctype html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport"
          content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    <title>PAYSPARK</title>
    <meta name="description" content="Finapp HTML Mobile Template">
    <meta name="keywords"
          content="bootstrap, wallet, banking, fintech mobile template, cordova, phonegap, mobile, html, responsive"/>
    <link rel="icon" type="image/png" href="assets/img/favicon.png" sizes="32x32">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/img/icon/192x192.png">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="manifest" href="__manifest.json">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>
    <!-- Inclure Axios via CDN -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

</head>

<body>

<!-- loader -->
<div id="loader">
    <img src="assets/img/loading-icon.png" alt="icon" class="loading-icon">
</div>
<!-- * loader -->

<!-- App Header -->
<div class="appHeader no-border transparent position-absolute">
    <div class="left">
        <a href="#" class="headerButton goBack">
            <ion-icon name="chevron-back-outline"></ion-icon>
        </a>
    </div>
    <div class="pageTitle"></div>
    <div class="right">
        <a href="app-login.html" class="headerButton">
            Connexion
        </a>
    </div>
</div>
<!-- * App Header -->

<!-- App Capsule -->
<!-- App Capsule -->
<div id="appCapsule">

    <div class="section mt-2 text-center">
        <h1>S'inscrire maintenant</h1>
        <h4>Créer un nouveau compte</h4>
    </div>
    <div class="section mb-5 p-2">
        <form id="registerForm" action="/payspark/api/register" method="post">
            <div class="card">
                <div class="card-body">
                    <div class="form-group basic">
                        <div class="input-wrapper">
                            <label class="label" for="name">Nom</label>
                            <input type="text" class="form-control" id="name" placeholder="Votre nom">
                            <i class="clear-input">
                                <ion-icon name="close-circle"></ion-icon>
                            </i>
                        </div>
                    </div>

                    <div class="form-group basic">
                        <div class="input-wrapper">
                            <label class="label" for="phoneNumber">Numéro de téléphone</label>
                            <input type="tel" class="form-control" id="phoneNumber"
                                   placeholder="Votre numéro de téléphonne">
                            <i class="clear-input">
                                <ion-icon name="close-circle"></ion-icon>
                            </i>
                        </div>
                    </div>

                    <div class="form-group basic">
                        <div class="input-wrapper">
                            <label class="label" for="password">Mot de passe</label>
                            <input type="password" class="form-control" id="password" autocomplete="off"
                                   placeholder="Votre mot de passe">
                            <i class="clear-input">
                                <ion-icon name="close-circle"></ion-icon>
                            </i>
                        </div>
                    </div>

                    <div class="form-group basic">
                        <div class="input-wrapper">
                            <label class="label" for="confirmPassword">Confirmer le mot de passe</label>
                            <input type="password" class="form-control" id="confirmPassword" autocomplete="off"
                                   placeholder="Confirmer votre mot de passe">
                            <i class="clear-input">
                                <ion-icon name="close-circle"></ion-icon>
                            </i>
                        </div>
                    </div>

                    <div class="form-group basic">
                        <div class="input-wrapper">
                            <label class="label" for="referralCode">Code de référence</label>
                            <input type="text" class="form-control" id="referralCode"
                                   placeholder="votre code d'invitation">
                            <i class="clear-input">
                                <ion-icon name="close-circle"></ion-icon>
                            </i>
                        </div>
                    </div>

                    <div class="custom-control custom-checkbox mt-2 mb-1">
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="customCheckb1">
                            <label class="form-check-label" for="customCheckb1">
                                J'accepte <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">termes et
                                conditions</a>
                            </label>
                        </div>
                    </div>

                </div>
            </div>

            <div class="form-button-group transparent">
                <button type="submit" id="submit" class="btn btn-primary btn-block btn-lg">S'inscrire</button>
            </div>

        </form>
    </div>

</div>
<!-- * App Capsule -->
<!-- * App Capsule -->


<!-- Terms Modal -->
<div class="modal fade modalbox" id="termsModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Termes et Conditions</h5>
                <a href="#" data-bs-dismiss="modal">Fermer</a>
            </div>
            <div class="modal-body">
                <p>
                <H2> 1.Objet</H2><br>
                Les présentes conditions générales (ci-après les "CG") ont pour objet de définir
                les droits et obligations des parties dans le cadre de l'utilisation du site internet
                PAYSPARK.
                </p>
                <p>
                <H2> 2.Acceptation des CG</H2><br>
                L'accès et l'utilisation du Site impliquent l'acceptation pleine et entière des CG par l'utilisateur
                (ci-après l' "Utilisateur").
                L'Utilisateur déclare avoir pris connaissance des informations contenues dans les CG et les accepter
                sans réserve.
                </p>
                <p>
                <H2> 3.Propriété intellectuelle</H2><br>
                Le Site et l'ensemble de son contenu, y compris notamment les textes, images, photographies, logos,
                marques, etc., sont protégés
                par le droit de la propriété intellectuelle et appartiennent à PAYSPARK.
                L'Utilisateur s'interdit de reproduire, copier, modifier, publier, distribuer ou exploiter de quelque
                manière que ce soit le Site
                ou son contenu sans l'autorisation écrite et préalable de PAYSPARK.
                </p>
                <p>
                <H2> 4.Risques liés à l'investissement</H2><br>
                L'Utilisateur reconnaît que les investissements financiers comportent des risques inhérents et que la
                perte totale ou partielle
                de son investissement est possible. PAYSPARK ne pourra être tenu responsable des pertes financières
                subies par
                l'Utilisateur en conséquence de ses investissements.
                </p>
                <p>
                <H2> 5.Intégralité</H2><br>
                Les présentes CG constituent l'intégralité de l'accord entre les parties et se substituent à toutes les
                communications,
                accords ou conventions antérieurs, qu'ils soient oraux ou écrits.
                </p>
            </div>
        </div>
    </div>
</div>
<!-- * Terms Modal -->


<!-- ========= JS Files =========  -->
<!-- Bootstrap -->
<script src="assets/js/lib/bootstrap.bundle.min.js"></script>
<!-- Ionicons -->
<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<!-- Splide -->
<script src="assets/js/plugins/splide/splide.min.js"></script>
<!-- Base Js File -->
<script src="assets/js/base.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>



<script>
    document.getElementById('registerForm').addEventListener('submit', async function (e) {
      e.preventDefault();
  
      try {
        const name = document.getElementById('name').value;
        const phone = document.getElementById('phoneNumber').value;
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        const inviteCode = document.getElementById('referralCode').value;
  
        if (!name || !phone || !password || !confirmPassword || !inviteCode) {
          Swal.fire({
            icon: 'warning',
            title: 'Champs manquants',
            text: 'Veuillez remplir tous les champs.',
            confirmButtonText: 'OK'
          });
          return;
        }
  
        if (password !== confirmPassword) {
          Swal.fire({
            icon: 'warning',
            title: 'Erreur de mot de passe',
            text: 'Les mots de passe ne correspondent pas.',
            confirmButtonText: 'OK'
          });
          return;
        }
  
        const response = await axios.post('http://localhost:5000/api/users/register', {
          name: name,
          phone: phone,
          password: password,
          inviteCode: inviteCode
        });
  
        if (response.status === 200) {
          Swal.fire({
            icon: 'success',
            title: 'Inscription réussie!',
            text: 'Vous allez être redirigé vers la page de connexion.',
            confirmButtonText: 'OK'
          }).then(() => {
            window.location.href = 'app-login.html';
          });
        } else {
          Swal.fire({
            icon: 'error',
            title: 'Erreur lors de l\'inscription',
            text: response.data.message || 'Une erreur est survenue.',
            confirmButtonText: 'OK'
          });
        }
      } catch (error) {
        console.error('Erreur de connexion au serveur:', error);
        Swal.fire({
          icon: 'error',
          title: 'Erreur de connexion',
          text: error.response ? error.response.data.message : 'Une erreur est survenue lors de la connexion au serveur.',
          confirmButtonText: 'OK'
        });
      }
    });
  </script>
  


</body>

</html>
