<!doctype html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    <title>Finapp</title>
    <meta name="description" content="Finapp HTML Mobile Template">
    <meta name="keywords" content="bootstrap, wallet, banking, fintech mobile template, cordova, phonegap, mobile, html, responsive" />
    <link rel="icon" type="image/png" href="assets/img/favicon.png" sizes="32x32">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/img/icon/192x192.png">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="manifest" href="__manifest.json">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>
</head>

<body class="bg-white">

    <!-- loader -->
    <div id="loader">
        <img src="assets/img/loading-icon.png" alt="icon" class="loading-icon">
    </div>
    <!-- * loader -->

    <!-- App Header -->
    <div class="appHeader no-border">
        <div class="left">
            <a href="#" class="headerButton goBack">
                <ion-icon name="chevron-back-outline"></ion-icon>
            </a>
        </div>
        <div class="pageTitle">
            Qr Code
        </div>
        <div class="right">
            <a href="" class="headerButton" data-bs-toggle="modal" data-bs-target="#DialogBasic">Aide</a>
        </div>
    </div>
    <!-- * App Header -->

    <!-- Dialog Basic -->
    <div class="modal fade dialogbox" id="DialogBasic" data-bs-backdrop="static" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">MON CODE UTILISATEUR</h5>
                </div>
                <div class="modal-body">
                    Vous pouvez utiliser le code QR pour parrainer un autre utilisateur.
                </div>
                <div class="modal-footer">
                    <div class="btn-inline">
                        <a href="#" class="btn btn-text-primary" data-bs-dismiss="modal">OK</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- * Dialog Basic -->

    <!-- App Capsule -->
    <div id="appCapsule">

        <div class="section">
            <div class="splash-page mt-5 mb-5">
                <div class="mb-3">
                    <img src="assets/img/sample/qr.png" alt="QR Code" class="imaged square w140">
                </div>
                <h2 class="mb-2">Scanner le code qr</h2>
                <p>
                    <div class="link-box">
                        <a href="#" id="shareLink">Lien à copier</a>
                        <button class="btn btn-secondary btn-sm" onclick="copyToClipboard()">Copier le lien</button>
                    </div>
                    
                    
                    <style>
                    .link-box {
                        border: 1px solid #ccc;
                        padding: 10px;
                        border-radius: 5px;
                        display: inline-block;
                        margin-top: 10px;
                        background-color: #f9f9f9;
                    }
                    .link-box a {
                        display: block;
                        margin-bottom: 5px;
                        color: #007bff;
                        text-decoration: none;
                    }
                    .link-box a:hover {
                        text-decoration: underline;
                    }
                    .link-box button {
                        display: inline-block;
                    }
                    </style>
                    
                    
                </p>
            </div>
        </div>

        <div class="fixed-bar">
            <div class="row">
                <div class="col-12">
                    <a href="index.html" class="btn btn-lg btn-outline-secondary btn-block">Annuler</a>
                </div>
            </div>
        </div>

    </div>
    <!-- * App Capsule -->


    <!-- ========= JS Files =========  -->
    <!-- Bootstrap -->
    <script src="assets/js/lib/bootstrap.bundle.min.js"></script>
    <!-- Ionicons -->
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <!-- Splide -->
    <script src="assets/js/plugins/splide/splide.min.js"></script>
    <!-- Base Js File -->
    <script src="assets/js/base.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>

document.addEventListener("DOMContentLoaded", function() {
    // Récupérer le code d'invitation de l'utilisateur à partir du localStorage ou sessionStorage
    const inviteCode = sessionStorage.getItem('inviteCode');
    console.log(inviteCode); // Ou utilisez localStorage si nécessaire

    if (!inviteCode) {
        console.error('Aucun inviteCode trouvé.');
        return;
    }

    // Construire le lien avec le code d'invitation comme paramètre
    const loginPageUrl = `app-register.html?inviteCode=${(inviteCode)}`;
    
    // Mettre à jour le lien dans l'élément <a>
    const shareLinkElement = document.getElementById('shareLink');
    if (shareLinkElement) {
        shareLinkElement.href = loginPageUrl;
        shareLinkElement.textContent = loginPageUrl; // Optionnel : mettre à jour le texte affiché du lien
    }
});

function copyToClipboard() {
    // Récupérer le lien de l'élément <a>
    const link = document.getElementById('shareLink').href;

    // Utiliser l'API Clipboard pour copier le lien
    navigator.clipboard.writeText(link)
        .then(() => {
            Swal.fire({
                icon: 'success',
                title: 'Lien copié',
                text: 'Le lien a été copié dans le presse-papiers.',
            });
        })
        .catch(err => {
            console.error('Erreur lors de la copie du lien:', err);
            Swal.fire({
                icon: 'error',
                title: 'Erreur',
                text: 'Erreur lors de la copie du lien.',
            });
        });
}



    </script>


</body>

</html>